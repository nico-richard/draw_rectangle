(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,i){for(var n=0;n<i.length;n++){var o=i[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,i);if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===t(r)?r:String(r)),o)}var r}var i=new WeakSet,n=function(){function t(e,n,o,r){var s,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(s=this,a=i),a.add(s),this.app=r,this.top=n-this.app.offset[1],this.left=e-this.app.offset[0],this.div=document.createElement("div"),this.div.setAttribute("class","subdiv subdiv-".concat(o)),this.div.style.position="absolute",this.div.style.top="".concat(n,"px"),this.div.style.left="".concat(e,"px"),this.newAllRect=[],root.appendChild(this.div),this.area=0,this.setRandomColor(),this.rotate360=[{transform:"rotate(0)"},{transform:"rotate(360deg)"}]}var n,r;return n=t,(r=[{key:"setRandomColor",value:function(){for(var t="";t.length<7;)t+=Math.random().toString(16);this.div.style.backgroundColor="#"+t.slice(-6)}},{key:"display",value:function(t,e){t-=this.app.offset[0],e-=this.app.offset[1],t>this.left?this.div.style.left="".concat(this.left,"px"):this.div.style.left="".concat(t,"px"),e>this.top?this.div.style.top="".concat(this.top,"px"):this.div.style.top="".concat(e,"px"),this.div.style.width="".concat(Math.abs(t-this.left),"px"),this.div.style.height="".concat(Math.abs(e-this.top),"px"),this.area=this.div.clientWidth*this.div.clientHeight}},{key:"onDbClick",value:function(t){var e=this;t.stopPropagation(),t.target.animate(this.rotate360,{duration:900}),this.app.rectDivToRemove.push(t.target),function(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}(this,i,o).call(this,(function(){e.app.allRect=e.app.allRect.filter((function(t){return!e.app.rectDivToRemove.includes(t.div)})),e.app.rectDivToRemove.forEach((function(t){t.remove()}))}),1e3)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function o(t,e){window.clearTimeout(this.app.timeout),this.app.timeout=window.setTimeout(t,e)}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e);if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key,"string"),"symbol"===r(o)?o:String(o)),n)}var o}function a(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function c(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var h=new WeakSet,u=new WeakSet,f=new WeakSet,d=new WeakSet,m=new WeakSet,p=new WeakSet;function v(){var t=this;["mousedown","mousemove"].forEach((function(e){return t.root.addEventListener(e,(function(e){return c(t,f,b).call(t,e)}))})),window.addEventListener("resize",(function(){c(t,u,y).call(t)})),this.resetButton.addEventListener("click",(function(){c(t,d,g).call(t)})),this.paintButton.addEventListener("click",(function(){c(t,m,k).call(t)})),this.logInfosButton.addEventListener("click",(function(){c(t,p,w).call(t)})),this.debugCheckbox.addEventListener("change",(function(){t.debugCheckbox.checked?t.utils.style.display="flex":t.utils.style.display="none"})),this.darkThemeCheckbox.addEventListener("change",(function(){t.darkThemeCheckbox.checked?document.documentElement.className="dark":document.documentElement.className="light"}))}function y(){this.offset=[root.getBoundingClientRect().left,root.getBoundingClientRect().top]}function b(t){var e=this;"mousedown"===t.type&&(this.isFirstClick?(this.workingRect=new n(t.clientX,t.clientY,this.divID,this),this.isFirstClick=!this.isFirstClick):(this.workingRect.display(t.clientX,t.clientY),this.workingRect.area>0&&(this.allRect.push(this.workingRect),this.divID++),this.workingRect.div.addEventListener("dblclick",(function(t){return e.workingRect.onDbClick(t)})),this.isFirstClick=!this.isFirstClick)),"mousemove"!==t.type||this.isFirstClick||this.workingRect.display(t.clientX,t.clientY)}function g(){this.allDivs=document.querySelectorAll(".subdiv"),this.allDivs.forEach((function(t){return t.remove()})),this.allRect=[],this.divID=0,this.isFirstClick=!0,this.minimalAreaDiff={refRect:null,targetRect:null,value:Number.MAX_VALUE}}function k(){if(this.allRect.length>=2){this.minimalAreaDiff={firstRect:null,secondRect:null,value:Number.MAX_VALUE},this.allRect.sort((function(t,e){return t.area<e.area?-1:t.area>e.area?1:0}));for(var t=0;t<this.allRect.length-1;t++)this.allRect[t+1].area-this.allRect[t].area<this.minimalAreaDiff.value&&(this.minimalAreaDiff.value=this.allRect[t+1].area-this.allRect[t].area,this.minimalAreaDiff.firstRect=this.allRect[t],this.minimalAreaDiff.secondRect=this.allRect[t+1]);this.minimalAreaDiff.firstRect.setRandomColor(),this.minimalAreaDiff.secondRect.div.style.backgroundColor=this.minimalAreaDiff.firstRect.div.style.backgroundColor}}function w(){console.log("allRect : ",this.allRect),console.log("workingRect : ",this.workingRect),console.log("isFirstClick : ",this.isFirstClick)}new(a((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,p),l(this,m),l(this,d),l(this,f),l(this,u),l(this,h),this.divID=0,this.isFirstClick=!0,this.workingRect=void 0,this.allRect=[],this.rectDivToRemove=[],this.allDivs=[],this.timeout=void 0,this.minimalAreaDiff=void 0,this.root=document.getElementById("root"),this.resetButton=document.getElementById("reset"),this.paintButton=document.getElementById("paint"),this.logInfosButton=document.getElementById("logInfos"),this.debugCheckbox=document.getElementById("debugCheckbox"),this.darkThemeCheckbox=document.getElementById("darkThemeCheckbox"),this.utils=document.getElementById("utils"),this.utils.style.display="none",c(this,h,v).call(this),c(this,u,y).call(this)})))})();